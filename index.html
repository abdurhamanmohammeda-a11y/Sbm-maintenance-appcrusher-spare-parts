<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abdurhaman Mechatronics | SBM Expert</title>
    <style>
        :root { --primary: #39FF14; --bg: #0d1117; --card-bg: #161b22; --text: #c9d1d9; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; padding: 15px; margin: 0; line-height: 1.6; }
        .container { max-width: 800px; margin: auto; }
        .card { background-color: var(--card-bg); padding: 20px; border: 1px solid #30363d; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        h1, h2 { color: var(--primary); text-align: center; }
        img { width: 100%; border-radius: 12px; border: 2px solid var(--primary); margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: #0d1117; font-size: 14px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #30363d; }
        th { color: var(--primary); }
        input, textarea { width:100%; padding:12px; margin:8px 0; border-radius:8px; border:1px solid #30363d; background:#0d1117; color:white; box-sizing:border-box; }
        .btn { display: block; width: 100%; padding: 15px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; margin-top: 10px; cursor: pointer; border: none; font-size: 16px; transition: 0.3s; }
        .btn-wa { background-color: #25D366; color: white; }
        .btn-diag { background-color: var(--primary); color: black; }
        .payment-box { border: 2px dashed var(--primary); padding: 15px; border-radius: 10px; text-align: center; background: #1c2128; }
        .acc { font-size: 1.2em; font-weight: bold; color: white; display: block; margin: 5px 0; letter-spacing: 1px; }
    </style>
</head>
<body>

<div class="container">
    <header style="text-align: center; padding: 20px 0;">
        <h1>üõ† Abdurhaman Mechatronics</h1>
        <p>Instrumentation, Control & SBM Machine Expert</p>
        <p style="background: var(--primary); color: black; display: inline-block; padding: 4px 12px; border-radius: 20px; font-weight: bold;">8+ YEARS EXPERIENCE</p>
    </header>

    <div class="card">
        <h2>üîç Spare Parts & Expertise</h2>
        <input type="text" id="partSearch" onkeyup="searchParts()" placeholder="Meeshaa barbaadi (fkn: Motor, Sensor)...">
        <table id="partsTable">
            <thead>
                <tr><th>Component</th><th>Task</th><th>Expertise</th></tr>
            </thead>
            <tbody>
                <tr><td>Main Motor (75kW)</td><td>Star-Delta Wiring</td><td>Expert</td></tr>
                <tr><td>Sensors & PLC</td><td>Instrumentation</td><td>Advanced</td></tr>
                <tr><td>Hydraulic System</td><td>Pressure Control</td><td>Specialist</td></tr>
                <tr><td>Jaw Crusher</td><td>Mechanical Maintenance</td><td>Expert</td></tr>
            </tbody>
        </table>
    </div>

    <div class="card" style="border: 2px solid var(--primary);">
        <h2>üîç Digital Diagnostic Center</h2>
        <p style="text-align:center;">Test machine health below.</p>
        <button onclick="checkMachineHealth()" class="btn btn-diag">1. Check Machine Health</button>
        <button onclick="interpretFault()" class="btn btn-diag" style="background-color: #ff9800;">2. Interpret Fault Code (E01-E04)</button>
    </div>

    <div class="card">
        <h2>üí≥ Payment Information</h2>
        <div class="payment-box">
            <p>Beneficiary: <strong>Abdurhaman Mohammed</strong></p>
            <p>CBE: <span class="acc">1000347503707</span></p>
            <p>Telebirr: <span class="acc">0988535068</span></p>
        </div>
    </div>

    <div class="card">
        <h2>üë®‚Äçüîß Request Expert Advice</h2>
        <form id="sheetdb-form">
            <input type="text" name="name" id="userName" placeholder="Your Name" required>
            <textarea name="message" id="userMsg" rows="4" placeholder="Describe the machine issue..." required></textarea>
            <button type="submit" id="submitBtn" class="btn btn-wa">üí¨ Save to Database & WhatsApp</button>
        </form>
    </div>

    <footer style="text-align: center; padding: 20px; font-size: 14px; color: #8b949e;">
        <p>&copy; 2026 Abdurhaman Mohammed | Dire Dawa, Ethiopia</p>
    </footer>
</div>

<script>
    // 1. DATABASE INTEGRATION (SheetDB)
    const form = document.getElementById('sheetdb-form');
    form.addEventListener("submit", e => {
        e.preventDefault();
        const submitBtn = document.getElementById('submitBtn');
        submitBtn.innerText = "Processing... ‚è≥";
        submitBtn.disabled = true;

        fetch('https://sheetdb.io/api/v1/49bhx2brvk9r3', {
            method : 'POST',
            body: new FormData(document.getElementById("sheetdb-form")),
        }).then(response => {
            if(response.ok) {
                alert("‚úÖ Galatoomi Abdurhaman! Odeeffannoon kee Excel irratti galmaa'eera.");
                let name = document.getElementById('userName').value;
                let msg = document.getElementById('userMsg').value;
                window.open(`https://wa.me/251904267186?text=Hello Abdurhaman, I am ${name}. Issue: ${msg}`, '_blank');
                form.reset();
            }
            submitBtn.innerText = "üí¨ Save to Database & WhatsApp";
            submitBtn.disabled = false;
        }).catch(err => {
            alert("‚ùå Error connecting to database.");
            submitBtn.disabled = false;
        });
    });

    // 2. SEARCH FUNCTION
    function searchParts() {
        let input = document.getElementById("partSearch").value.toUpperCase();
        let tr = document.getElementById("partsTable").getElementsByTagName("tr");
        for (let i = 1; i < tr.length; i++) {
            let td = tr[i].getElementsByTagName("td")[0];
            if (td) tr[i].style.display = td.innerText.toUpperCase().indexOf(input) > -1 ? "" : "none";
        }
    }

    // 3. DIAGNOSTICS
    function checkMachineHealth() {
        let temp = prompt("Enter Machine Temperature (¬∞C):");
        if (temp === null) return;
        if (parseFloat(temp) > 90) alert("‚ö†Ô∏è DANGER: Overheating! (" + temp + "¬∞C)");
        else alert("‚úÖ NORMAL: Machine is stable.");
    }

    function interpretFault() {
        const faults = {"E01": "Phase Failure", "E02": "High Temp", "E03": "Vibration Alert", "E04": "Oil Pressure Low"};
        let code = prompt("Enter Fault Code (E01-E04):");
        if (code === null) return;
        let result = faults[code.trim().toUpperCase()];
        alert(result ? "üîç Diagnosis: " + result : "‚ùì Unknown Code.");
    }
</script>
</body>
</html>
